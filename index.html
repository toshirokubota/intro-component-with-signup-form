<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>Frontend Mentor | Intro component with sign up form</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Poppins" />
  <link rel="stylesheet" href="style.css">
  <style>
    .attribution {
      font-size: 11px;
      text-align: center;
    }

    .attribution a {
      color: hsl(228, 45%, 44%);
    }
  </style>
</head>

<body>
  <main>
    <div class="description-card">
      <h1>
        Learn to code by watching others
      </h1>
      <h2>
        See how experienced developers solve problems in real-time. Watching scripted tutorials is great,
        but understanding how developers think is invaluable.
      </h2>
    </div>
    <div class="form-card">
      <div class="banner">
        <strong>Try it free 7 days</strong> then $20/mo. thereafter
      </div>
      <form onsubmit="mysubmit(event)">
        <div class="input-group">
          <div class="input-item">
            <input type="text" id="fname" name="fname" placeholder="First Name" />
            <i class="error-icon"><img src="./images/icon-error.svg" alt="error icon" /></i>
            <p class="error-msg">First name cannot be empty</p>
          </div>
          <div class="input-item">
            <input type="text" id="lname" name="lname" placeholder="Last Name" />
            <i class="error-icon"><img src="./images/icon-error.svg" alt="error icon" /></i>
            <p class="error-msg">Last name cannot be empty</p>
          </div>
          <div class="input-item">
            <input type="email" id="email" name="email" placeholder="Email Address" />
            <i class="error-icon"><img src="./images/icon-error.svg" alt="error icon" /></i>
            <p class="error-msg">Looks like this is not an email</p>
          </div>
          <div class="input-item">
            <input type="password" id="passwd" name="passwd" placeholder="Password" />
            <i class="error-icon"><img src="./images/icon-error.svg" alt="error icon" /></i>
            <p class="error-msg">Password cannot be empty</p>
          </div>
          <input type="submit" class="submit-button" value="Claim your free trial" />
          <p class="disclaimer">
            By clicking the button, you are agreeing to our <em>Terms and Services</em>
          </p>
        </div>
      </form>
    </div>
  </main>
  <footer>
    <p class="attribution">
      Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
      Coded by <a href="#">Your Name Here</a>.
    </p>
  </footer>
</body>
<script>
  function validate() {
    var fname = document.getElementById('fname');
    var lname = document.getElementById('lname');
    var email = document.getElementById('email');
    var passwd = document.getElementById('passwd');
    var pattern = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    var ok = true;
    if (fname.value.length == 0) {
      ok = false;
      updateVisual(fname, false);
    } else {
      updateVisual(fname, true);
    }
    if (lname.value.length == 0) {
      ok = false;
      updateVisual(lname, false);
    } else {
      updateVisual(lname, true);
    }
    if (passwd.value.length == 0) {
      ok = false;
      updateVisual(passwd, false);
    } else {
      updateVisual(passwd, true);
    }
    if (!pattern.test(email.value)) {
      ok = false;
      updateVisual(email, false);
    } else {
      updateVisual(email, true);
    }
    return ok;
  }
  function updateVisual(elm, ok) {
    const parent = elm.parentNode;
    if (parent) {
      const children = Array.from(parent.children);
      children.forEach(e => {
        if (e.tagName == "P" || e.tagName == "I") {
          // if (ok) e.style.visibility = 'hidden';
          // else e.style.visibility = 'visible';
          if (ok) e.style.display = 'none';
          else e.style.display = 'block';
        }
      });
    }
    if (ok) elm.style.borderColor = 'black';
    else elm.style.borderColor = 'red';
  }

  //   if(ok) {

  //     document.querySelectorAll('.error-icon').forEach(e => {
  //       e.style.visibility = 'hidden';
  //     });
  //     document.querySelectorAll('.error-msg').forEach(e => {
  //       e.style.visibility = 'hidden';
  //     });
  //     document.querySelectorAll('.form-card input').forEach(e => {
  //       e.style.borderColor = 'black';
  //     });
  //   } else {
  //     document.querySelectorAll('.error-icon').forEach(e => {
  //       e.style.visibility = 'visible';
  //     });
  //     document.querySelectorAll('.error-msg').forEach(e => {
  //       e.style.visibility = 'visible';
  //     });
  //     document.querySelectorAll('.form-card input').forEach(e => {
  //       e.style.borderColor = 'red';
  //     });
  //   }
  // }

  function mysubmit(event) {
    console.log('in submit()');
    var ok = validate();
    if (!ok) {
      event.preventDefault();
    }
  }
</script>

</html>